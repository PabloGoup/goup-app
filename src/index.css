@tailwind base;
@tailwind components;
@tailwind utilities;

/* ====== Compat (actualizado para que light = crema) ====== */
:root {
  /* para utilidades antiguas que usaban --bg/--fg */
  --bg: #090808;           /* crema suave */
  --fg: #ffffff;           /* casi negro */
  --brand: #8e2afc;        /* morado de marca */
  --surface-1: #fffaf0;
  --surface-2: #fff4db;
  --surface-3: #ffefcc;
  --muted-hex: #6b6f76;
}

/* ====== TOKENS HSL (MODO CLARO – crema con texto negro) ======
   Usar con bg-background, text-foreground, bg-card, etc.            */
:root {
  --bg: #090909;
  --fg: #ffffff;

  --background: 240 5.9% 00%;
  --foreground: 0 0% 98%;

  --card: 240 10% 12%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 12%;
  --popover-foreground: 0 0% 98%;

  --primary: 268 96% 58%;
  --primary-foreground: 0 0% 100%;

  --secondary: 240 4% 18%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 4% 18%;
  --muted-foreground: 240 5% 64%;
  --accent: 268 60% 22%;
  --accent-foreground: 0 0% 98%;

  --border: 240 4% 26%;
  --input: 240 4% 26%;
  --ring: var(--primary);
}

/* ====== MODO OSCURO (por clase .dark) – tu look actual ====== */
.dark {
  /* compat */
  --bg: #090909;
  --fg: #ffffff;

  --background: 240 5.9% 0%;
  --foreground: 0 0% 98%;

  --card: 240 10% 12%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 12%;
  --popover-foreground: 0 0% 98%;

  --primary: 268 96% 58%;
  --primary-foreground: 0 0% 100%;

  --secondary: 240 4% 18%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 4% 18%;
  --muted-foreground: 240 5% 64%;
  --accent: 268 60% 22%;
  --accent-foreground: 0 0% 98%;

  --border: 240 4% 26%;
  --input: 240 4% 26%;
  --ring: var(--primary);
}

/* Google Places (dark friendly) */
.pac-container {
  z-index: 9999 !important;
  border-radius: 10px;
  overflow: hidden;
  background: hsl(var(--card));
  color: hsl(var(--foreground));
  border: 1px solid hsl(var(--border));
  box-shadow: 0 10px 30px rgba(0,0,0,.45);
}
.pac-item {
  cursor: pointer;
  color: hsl(var(--foreground));
}
.pac-item:hover {
  background: hsl(var(--secondary));
}
.pac-item .pac-item-query,
.pac-matched {
  color: #cbb3ff; /* realce morado para coincidencias */
}
.pac-icon {
  filter: invert(1) opacity(.85);
}

/* ====== MAPEO BASE A TAILWIND ====== */
@layer base {
  * { @apply border-border; }
  html, body, #root { @apply bg-background text-foreground; }
  /* Campos de formulario legibles en dark */
  input, textarea, select {
    color: hsl(var(--foreground));
    caret-color: hsl(var(--foreground));
    background-color: transparent; /* respeta bg de Tailwind */
  }
  input::placeholder,
  textarea::placeholder {
    color: hsl(var(--muted-foreground));
    opacity: .85;
  }
  /* Autofill Chrome/Safari: evita texto negro sobre dark */
  input:-webkit-autofill,
  textarea:-webkit-autofill,
  select:-webkit-autofill {
    -webkit-text-fill-color: #ffffff !important;
    transition: background-color 99999s ease-in-out 0s;
  }
  input:-webkit-autofill:focus,
  textarea:-webkit-autofill:focus,
  select:-webkit-autofill:focus {
    -webkit-text-fill-color: #ffffff !important;
  }
}

/* ====== UTILIDADES / ANIMACIONES ====== */
@keyframes slide-in {
  0% { transform: translateX(100%); opacity: 0; }
  100% { transform: translateX(0%); opacity: 1; }
}
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
.animate-slide-in { animation: slide-in 0.3s ease-out forwards; }

/* ====== SLIDER PERSONALIZADO GOUP (ahora temable) ====== */
.distance-slider {
  width: 100%;
  height: 8px;
  background: hsl(var(--muted));            /* antes #27212c */
  border-radius: 6px;
  appearance: none;
  outline: none;
}
.distance-slider::-webkit-slider-thumb {
  appearance: none;
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: var(--brand);
  border: 3px solid #fff;
  margin-top: -13px;
  cursor: grab;
  box-shadow: 0 2px 8px #8e2afc40;
  background-image: url("data:image/svg+xml;utf8,<svg fill='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path d='M12 2C7.59 2 4 5.58 4 10.03c0 3.79 3.4 7.86 7.12 11.39a1.46 1.46 0 0 0 1.77 0C16.6 17.89 20 13.82 20 10.03 20 5.58 16.41 2 12 2zm0 13.03a3 3 0 1 1 0-6.01 3 3 0 0 1 0 6.01z'/></svg>");
  background-repeat: no-repeat;
  background-position: center;
  background-size: 22px 22px;
  transition: box-shadow 0.2s;
}
.distance-slider:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 4px #8e2afc80;
}
.distance-slider::-moz-range-thumb,
.distance-slider::-ms-thumb {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: var(--brand);
  border: 3px solid #fff;
  cursor: grab;
  box-shadow: 0 2px 8px #8e2afc40;
  background-image: url("data:image/svg+xml;utf8,<svg fill='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path d='M12 2C7.59 2 4 5.58 4 10.03c0 3.79 3.4 7.86 7.12 11.39a1.46 1.46 0 0 0 1.77 0C16.6 17.89 20 13.82 20 10.03 20 5.58 16.41 2 12 2zm0 13.03a3 3 0 1 1 0-6.01 3 3 0 0 1 0 6.01z'/></svg>");
  background-repeat: no-repeat;
  background-position: center;
  background-size: 22px 22px;
}

/* ===== Utils hero fade & neon ===== */
@layer utilities {
  /* Desvanecido inferior (ahora usa el token del tema) */
  .fade-bottom {
    --fade-bg: hsl(var(--background));
    background: linear-gradient(to bottom, transparent, var(--fade-bg));
  }

  .btn-elev {
    box-shadow: 0 4px 14px rgba(159, 148, 171, 0.25), 0 2px 4px rgba(0,0,0,.25);
  }

  .title-outline {
    --stroke: rgba(0,0,0,.55);
    --fill: #fff;
    --shadow: rgba(0,0,0,.45);
    -webkit-text-stroke-width: 1.5px;
    -webkit-text-stroke-color: var(--stroke);
    -webkit-text-fill-color: var(--fill);
    paint-order: stroke fill;
    text-shadow: 0 1px 2px var(--shadow), 0 2px 6px rgba(0,0,0,.30);
    letter-spacing: 0.01em;
  }
  @media (max-width: 640px) { .title-outline { -webkit-text-stroke-width: 1px; } }

  .neon-card { position: relative; overflow: hidden; }
  .neon-card::before {
    content: "";
    position: absolute; inset: -40%;
    z-index: 0; opacity: 0;
    transition: opacity 350ms ease, transform 350ms ease;
    background: radial-gradient(
      35% 35% at 50% 50%,
      color-mix(in oklab, var(--brand) 70%, transparent),
      transparent 70%
    );
    filter: blur(30px);
    transform: scale(0.9);
  }
  .neon-card:hover::before { opacity: 0.9; transform: scale(1); }

  .text-outline {
    text-shadow: 0 0 1px rgba(0,0,0,.7), 0 1px 2px rgba(0,0,0,.6);
  }

  .bleed-x {
    position: relative;
    width: 100vw;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
  }

  .edge-fade {
    --fade: 32px;
    -webkit-mask-image: linear-gradient(
      to right,
      transparent 0,
      black var(--fade),
      black calc(100% - var(--fade)),
      transparent 100%
    );
            mask-image: linear-gradient(
      to right,
      transparent 0,
      black var(--fade),
      black calc(100% - var(--fade)),
      transparent 100%
    );
  }
  @media (min-width: 640px) { .edge-fade { --fade: 48px; } }
  @media (min-width: 1024px){ .edge-fade { --fade: 64px; } }

  .carousel-fade-left{
    background: linear-gradient(
      to right,
      rgba(9,9,9,0.98) 0%,
      rgba(9,9,9,0.70) 35%,
      rgba(9,9,9,0.35) 70%,
      rgba(9,9,9,0.00) 100%
    );
  }
  .carousel-fade-right{
    background: linear-gradient(
      to left,
      rgba(9,9,9,0.98) 0%,
      rgba(9,9,9,0.70) 35%,
      rgba(9,9,9,0.35) 70%,
      rgba(9,9,9,0.00) 100%
    );
  }
  input[type="file"]::file-selector-button {
    background-color: #8e2afc; /* Botón morado */
    color: white;             /* Texto blanco */
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
  }
  
  input[type="file"]::file-selector-button:hover {
    background-color: #7b1fe0; /* Hover */
  }

  input[type="file"]::-webkit-file-upload-button {
    background-color: #8e2afc;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
  }
}

/* =============================
   GoUp Select (custom combobox)
   ============================= */
@layer components {
  /* Base look */
  .goup-select {
    @apply w-full rounded-md border border-white/15 bg-black/5 px-2 py-2 text-sm text-foreground outline-none;
    appearance: none;                /* hide native arrow */
    -webkit-appearance: none;
    -moz-appearance: none;
    color-scheme: dark;              /* dark popup on supported browsers */

    /* custom arrow */
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'><path d='M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.39a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z'/></svg>");
    background-repeat: no-repeat;
    background-position: right .6rem center;
    background-size: 16px 16px;
    padding-right: 2.25rem;          /* room for arrow */
  }
  .goup-select:focus {
    @apply ring-2 ring-[#FE8B02] ring-offset-0 border-[#FE8B02]/50;
  }
  .goup-select:disabled {
    @apply opacity-60 cursor-not-allowed;
  }
  /* Windows/IE legacy */
  .goup-select::-ms-expand { display: none; }

  /* Sizes */
  .goup-select-sm { @apply px-2 py-2 text-xs; background-position: right .5rem center; padding-right: 1.75rem; }
  .goup-select-lg { @apply px-4 py-3 text-base; background-position: right .75rem center; padding-right: 2.5rem; }

  /* Invalid state helper */
  .goup-select-invalid { @apply border-red-500 ring-1 ring-red-500; }

  /* --- Windows/Chrome dropdown visibility fixes & consistency --- */
  /* force stable metrics so Windows doesn't render huge/blank rows */
  .goup-select {
    line-height: 1.2;        /* predictable text vertical align */
    min-height: 40px;        /* consistent control height */
    height: 40px;            /* prevents oversized native rows */
    padding-top: 0;          /* avoid double vertical padding */
    padding-bottom: 0;       /* idem */
    background-color: rgba(255,255,255,0.06); /* solid-ish bg behind popup */
    border-color: rgba(255,255,255,0.12);
  }

  /* Ensure readable options in Windows native popup */
  .goup-select option {
    color: #e7e7e7;
    background-color: #111; /* avoid white strips */
  }

  /* Legacy/Edge old arrow */
  .goup-select::-ms-expand { display: none; }

  /* Subtle scrollbar styling when the list is long */
  .goup-select { scrollbar-color: rgba(255,255,255,0.35) transparent; }
}